<h1>Book Trade</h1>
<div id="main-container" class="container">
  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <%= form_for @book, :url => { :controller => 'books', :action => 'create' } do |f| %>
        <div class="form-group">
          <label class="col-sm-2">書名</label>
          <%= f.text_field "book_name", :class => "form-control" %>
					<label id="query" class=".btn">query</label>
        </div>
        <div class="form-group">
          <label class="col-sm-2">圖片網址</label>
          <%= f.url_field "image_url", :class => "form-control" %>
        </div>
        <div class="form-group">
          <label class="col-sm-2">價格</label>
          <%= f.text_field "price", :class => "form-control" %>
        </div>
        <div class="form-group">
          <label class="col-sm-2">書況</label>
          <%= f.text_area "desc", :class => "form-control" %>
        </div>
        <div class="col-md-6 col-md-offset-6">
          <%= f.submit "新增品項", class: "btn btn-primary" %>
        </div>
      <% end %>
	  <!--
      <table>
        <thead>
          <tr>
            <td>User id</td>
            <td>Book name</td>
            <td>Image url</td>
            <td>Price</td>
            <td>Desc</td>
          </tr>
        </thead>
        <tbody>  
        <% @list.each do |p| %>
          <tr>
            <td><%= p.user_id %></td>
            <td><%= p.book_name %></td>
            <td><%= p.image_url %></td>
            <td><%= p.price %></td>
            <td><%= p.desc %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
	  -->
    </div>
  </div>
</div>
<script>
$("#query").click(function(){
	var title=$("#book_trade_info_book_name").val();	
	$.ajax({
		type : "POST",
		data : {title : title},
		url : "/books/google_book",
		success : function(data) {
			console.log(data);
			var content=""	;
			for(var i=0;i<5;i++) {
				content+='<div id="'+i+'">';
				content+="title: "+data[i].title+"<br>authors: "+data[i].authors+'<br>image: <img src="'+data[i].volume_info.imageLinks.thumbnail+'">';
				content+='<br><br></div>';
			}
			
			showGlobalModal(title, content);
		}
	});
	
});
</script>