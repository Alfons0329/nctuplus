<%= stylesheet_link_tag "fullcalendar/fullcalendar.min", "data-turbolinks-track" => true %>
<%= javascript_include_tag "fullcalendar/moment.min", "data-turbolinks-track" => true %>
<%= javascript_include_tag "fullcalendar/fullcalendar.min", "data-turbolinks-track" => true %>

<script>

	$(document).ready(function() {
		var events=<%=@event_data.html_safe%>;
		$('#calendar').fullCalendar({
			header:{
				left: "prev,next",
				center: "title",
				right: "month,agendaWeek,agendaDay"
			},
			selectable: true,
			selectHelper: true,
			select: function(start,end){
				if(confirm("是否在此時間開新活動?")){
					window.location="/events/new?start="+start+"&end="+end;
				}
			},
			events: events,
			eventClick: function(calEvent, jsEvent, view) {
				window.location="/events/"+calEvent.id;
				/*
        console.log('Event: ' + calEvent.id);
        console.log('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
        console.log('View: ' + view.name);

        // change the border color just for fun
        $(this).css('border-color', 'red');
				*/
			},
			
		});
	});

</script>
<style>
	#calendar {
		max-width: 900px;
		margin: 0 auto;
	}
	.fc-event{
    cursor: pointer;
	}
	.講座{
		background-color: #33135B;
		border-color: #33135B;
	}
	.表演{
		background-color: #3a87ad;
		border-color: #3a87ad;
	}
	.比賽{
		background-color: #6C9C2A;
		border-color: #6C9C2A;
	}
	.擺攤{
		background-color: #B16919;
		border-color: #B16919;
	}
	.其他{
		background-color: #922D1B;
		border-color: #922D1B;
	}
</style>
<div class="col-md-offset-2">
	<%=link_to "新增活動",new_event_path,class:"btn btn-info","data-no-turbolink"=>true%>
</div>
<br>
<div id='calendar' class="bg-white"></div>
