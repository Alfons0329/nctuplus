

<div class="panel panel-primary" >
	<div class="panel-heading" >
		<h4 class="text-center">歷年課程</h4>
	</div>
	
	<br>
	<div class="container">
	
	
	
	<% unless @cs_agree.empty? %>
	
		<table class="table table-bordered"style="border:0px">
			<tr class="row">
				<th class="col-md-"><h4 class="text-center">抵免科目<h4></th>
			</tr>
			<% @cs_agree.group_by{|cs| cs.course_detail.cos_type}.each do |type,cs_local| %>
			<tr class="row"><th class="col-md- <%=cos_type_class(type)%>"><%=type%></th></tr>
			<% credit_sum=0 %>
			<% cs_local.each do |cs_agree| %>
			
				<tr class="row">
					<td class="col-md-">
						<h4 class="text-center">
						<% if cs_agree.course_field %>
							<%=cs_agree.course_field.name%> | 
						<% end %>
						<%=cs_agree.course.ch_name%> | 
						<%=cs_agree.course_detail.cos_type%> | 
						<%= fa_icon "graduation-cap", class:"credit-count" %><strong><%=cs_agree.course_detail.credit%></strong>
						</h4>
					</td>
				</tr>
			<% end %>
			<% end %>
			<tr class="row ">
				<td class="col-md- label-info">
					<h4 class="text-right">
						<%all_credit_sum=0%>
						<% @cs_agree.group_by{|cs| cs.course_detail.cos_type}.each do |type,cs_all| %>
							<% credit=cs_all.map{|cs|cs.course_detail.credit.to_i}.reduce(:+)%>
								<%=type%> : <strong><%=credit%></strong>
							<%all_credit_sum+=credit%>
						<% end %>
							共 <strong><%=@cs_agree.count%></strong> 門課 <strong><%=all_credit_sum%></strong> 學分
					</h4>
				</td>
			</tr>
		</table>
	<% end %>
	</div>	
	<br>
	<div class="row" style="margin-top:2px;">
		<div class="col-md-2 col-md-offset-2">
		<p class="text-right" style="margin-top:3px;">
			<label class="">List by : </label>
		</p>
		</div>
		<div class="col-md-4">
			<%= select_tag "", options_for_select([['課程種類','cos_type'],['學期','semester']]), onchange:"$('.statics_table').toggleClass('hidden');", class:"form-control" %>
		</div>
		<div class="col-md-1">
			<a href="http://aadm.nctu.edu.tw/chcourse/class03.aspx?ftype=3" class="btn btn-primary" target="_blank">
			<%=fa_icon "bookmark-o"%>必修科目表
			</a>
		</div>
	</div>
	<br>
	<%= render :partial=>"/user/table_list_by_costype", locals: {cs_mixed: @cs_all_cos_type, table_class:"statics_table"} %>
	<%= render :partial=>"/user/table_list_by_semester", locals: {table_class:"statics_table"} %>
</div>

<div class="modal fade" id="courselist_modal" tabindex="-1" role="dialog" aria-hidden="true" >
	<div class="modal-dialog" >
		<div class="modal-content" >
			<!--<div class="modal-footer">
				<button type="button" class="btn btn-primary">Purchase</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>-->
		</div>
	</div>
</div>
<script>

$('body').on('hidden.bs.modal', '.modal', function () {
    $(this).removeData('bs.modal');
});
</script>
