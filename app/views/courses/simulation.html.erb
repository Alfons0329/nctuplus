<div class="row" style="background-color:rgba(221,221,221,0.8)">
	<div class="tabbable tabs-left col-md-4 col-md-offset-1">
		<div class="tab-content" style="overflow:hidden;">
		 <div class="tab-pane active" id="a">
				<div class="panel panel-primary ">
					<div class="panel-heading">
						<h4 class="text-center">
							<button id="has-select-btn" class="btn btn-circle btn-info pull-left" onclick="show_has_select()" style="margin-top: -5px;">
								<font color="white"><%=fa_icon "check"%></font>
							</button>	
							課程查詢
							<button id="cart-btn" class="btn btn-circle btn-info pull-right" onclick="show_cart_select()" style="margin-top: -5px;">
								<font color="white"><%=fa_icon "shopping-cart"%></font>
							</button>
						</h4>
					</div>
					<div class="panel-body">
						<div id="search_div" class="row schedule-search-bar"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-6 " id="schedule_div"></div>
</div>


<script>
$(document).ready(function(){
	$('#cart-btn').popover({
		content: "顯示觀察名單",
		placement:"auto",
		trigger : "hover",
		container :"body"
	});
	$('#has-select-btn').popover({
		content: "已選課程",
		placement:"auto",
		trigger : "hover",
		container :"body"
	});
	
	//sidebar search
	$("#search_div").load("/courses/search_mini?sem_id=<%=latest_semester.id%>",function(){
		show_has_select();
	});	
	//course table
	load_course_table(<%=latest_semester.id%>);
	
	
});
	function load_course_table(semester_id){
		$.getJSON("/user/get_courses?type=course_table&sem_id="+semester_id,function(data){
			//xtmpl is in header
			$("#schedule_div").html(tmpl("course_table", data.semester_info));
			table_popover();
			if(data.courses.length>0) add_time_slot(data.courses, data.semester_info.isNow, false) ;		
		});
	}
	function show_has_select(){
		$.getJSON("/user/get_courses?type=simulation",function(data){
			$(".scrollable").html(tmpl("search_result", data));
		});
	}
	function show_cart_select(){
		$.getJSON("/sessions/get_courses",function(data){
			$(".scrollable").html(tmpl("search_result", data));
		});
	}
	function show_cart(){
		$("#search_div").load("/course_details/mini?sem_id=<%=@sem_id%>");
	}

</script>

<%=render "courses/search/xtmpl_results_mini"%>
